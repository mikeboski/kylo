/**
 * State-based routing for Angular
 * @version v1.0.0-rc.1
 * @link https://ui-router.github.io/ng2
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@uirouter/core"),require("rxjs/ReplaySubject"),require("rxjs/BehaviorSubject"),require("rxjs/observable/of"),require("rxjs/observable/fromPromise"),require("rxjs/observable/combineLatest"),require("rxjs/operator/switchMap"),require("rxjs/operator/map"),require("rxjs/operator/concat"),require("@angular/router"),require("@uirouter/rx")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@uirouter/core","rxjs/ReplaySubject","rxjs/BehaviorSubject","rxjs/observable/of","rxjs/observable/fromPromise","rxjs/observable/combineLatest","rxjs/operator/switchMap","rxjs/operator/map","rxjs/operator/concat","@angular/router","@uirouter/rx"],t):t(e["@uirouter/angular"]=e["@uirouter/angular"]||{},e.ng.core,e.ng.common,e["@uirouter/core"],e.Rx,e.Rx,e.Rx.Observable,e.Rx.Observable,e.rxjs_observable_combineLatest,e.rxjs_operator_switchMap,e.Rx.Observable.prototype,e.rxjs_operator_concat,e._angular_router,e["@uirouter/rx"])}(this,function(e,t,r,n,o,i,a,s,u,c,p,f,l,h){"use strict";function d(e){var t={},r=e.views||{$default:n.pick(e,["component","bindings"])};return n.forEach(r,function(r,o){if(o=o||"$default",n.isFunction(r)&&(r={component:r}),0!=Object.keys(r).length){r.$type="ng2",r.$context=e,r.$name=o;var i=n.ViewService.normalizeUIViewTarget(r.$context,r.$name);r.$uiViewName=i.uiViewName,r.$uiViewContextAnchor=i.uiViewContextAnchor,t[o]=r}}),t}function g(e,t,r){return void 0===r&&(r={}),n.isFunction(r.config)&&r.config(e,t,r),(r.states||[]).map(function(t){return e.stateRegistry.register(t)})}function v(e,t,r){n.isDefined(r.deferIntercept)&&e.urlService.deferIntercept(r.deferIntercept),n.isDefined(r.otherwise)&&e.urlService.rules.otherwise(r.otherwise),n.isDefined(r.initial)&&e.urlService.rules.initial(r.initial)}function _(e,t){return t.map(function(r){return e.concat(n.PathUtils.subPath(t,function(e){return e.state===r.state}))})}function y(e,t){var r=G(t),o=e.trans.treeChanges(),i="start"===e.evt,a="success"===e.evt,s=a?o.to:o.from;return{active:function(){return _([],s).map(r).reduce(n.anyTrueR,!1)}(),exact:function(){return r(s)}(),entering:!!i&&function(){return _(o.retained,o.entering).map(r).reduce(n.anyTrueR,!1)}(),exiting:!!i&&function(){return _(o.retained,o.exiting).map(r).reduce(n.anyTrueR,!1)}(),targetStates:[t]}}function m(e,t){return{active:e.active||t.active,exact:e.exact||t.exact,entering:e.entering||t.entering,exiting:e.exiting||t.exiting,targetStates:e.targetStates.concat(t.targetStates)}}function R(e,t){var r=t[0];return r&&r.deferInitialRender?function(){return new Promise(function(t){var r=function(e){e.promise.then(t,t)};e.onStart({},r,{invokeLimit:1})})}:function(){return Promise.resolve()}}function S(e){return[{provide:ee,useValue:e,multi:!0},{provide:te,useValue:e,multi:!0},{provide:l.ROUTES,useValue:e.states||[],multi:!0},{provide:t.ANALYZE_FOR_ENTRY_COMPONENTS,useValue:e.states||[],multi:!0},{provide:t.APP_INITIALIZER,useFactory:R,deps:[n.TransitionService,ee],multi:!0}]}function b(e){return[{provide:te,useValue:e,multi:!0},{provide:l.ROUTES,useValue:e.states||[],multi:!0},{provide:t.ANALYZE_FOR_ENTRY_COMPONENTS,useValue:e.states||[],multi:!0}]}function I(e){return{provide:r.LocationStrategy,useClass:e?r.HashLocationStrategy:r.PathLocationStrategy}}function w(e){return function(t,r){var o=t.injector().get(n.NATIVE_INJECTOR_TOKEN),i=function(e){return e.create(o)},a=function(e){return U(t,e,o,r)};return E(e,o).then(i).then(a)}}function E(e,r){if(n.isString(e))return r.get(t.NgModuleFactoryLoader).load(e);var o=r.get(t.Compiler),i=o instanceof t.Compiler,a=function(e){return e&&e.__esModule&&e.default?e.default:e},s=function(e){return o.compileModuleAsync(e)},u=Promise.resolve(e()).then(a);return i?u:u.then(s)}function U(e,t,r,o){var i=t.injector,a=i.get(n.UIRouter),s=a.stateRegistry,u=o.name,c=s.get(u),p=/^(.*)\.\*\*$/.exec(u),f=p&&p[1],l=O(r,i,ee).reduce(n.uniqR,[]),h=O(r,i,te).reduce(n.uniqR,[]);if(l.length)throw console.log(l),new Error("Lazy loaded modules should not contain a UIRouterModule.forRoot() module");var d=h.map(function(e){return g(a,i,e)}).reduce(n.unnestR,[]).reduce(n.uniqR,[]);if(p){var v=s.get(f);if(!v||v===c)throw new Error("The Future State named '"+u+"' lazy loaded an NgModule. The lazy loaded NgModule must have a state named '"+f+"' which replaces the (placeholder) '"+u+"' Future State. Add a '"+f+"' state to the lazy loaded NgModule using UIRouterModule.forChild({ states: CHILD_STATES }).")}return d.filter(function(e){return!n.inArray(d,e.parent)}).forEach(function(e){return e.resolvables.push(n.Resolvable.fromData(n.NATIVE_INJECTOR_TOKEN,i))}),{}}function O(e,t,r){var n=t.get(r,[]),o=e.get(r,[]);return n.filter(function(e){return-1===o.indexOf(e)})}function x(e,t){var r=e.loadChildren;return r?w(r):e.lazyLoad}function T(e,t){function r(){this.constructor=e}oe(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function C(e,o,i,a){if(1!==o.length)throw new Error("Exactly one UIRouterModule.forRoot() should be in the bootstrapped app module's imports: []");var s=new n.UIRouter;s.plugin(h.UIRouterRx),s.plugin(n.servicesPlugin),n.services.$injector.get=a.get.bind(a),s.locationService=new ie(s,e,r.isPlatformBrowser(a.get(t.PLATFORM_ID))),s.locationConfig=new ae(s,e);var u=function(e,t){return new L(e,t)};s.viewService._pluginapi._viewConfigFactory("ng2",u);var c=s.stateRegistry;c.decorator("views",d),c.decorator("lazyLoad",x);var p=n.Resolvable.fromData(n.NATIVE_INJECTOR_TOKEN,a);return c.root().resolvables.push(p),s.urlMatcherFactory.$get(),o.forEach(function(e){return v(s,a,e)}),i.forEach(function(e){return g(s,a,e)}),s.urlRouter.interceptDeferred||(s.urlService.listen(),s.urlService.sync()),s}function j(e){return{fqn:null,context:e.root()}}function N(e){return e.stateService}function P(e){return e.transitionService}function V(e){return e.urlMatcherFactory}function D(e){return e.urlRouter}function A(e){return e.urlService}function M(e){return e.viewService}function F(e){return e.stateRegistry}function $(e){return e.globals}var q=0,L=function(){function e(e,t){this.path=e,this.viewDecl=t,this.$id=q++,this.loaded=!0}return e.prototype.load=function(){return n.services.$q.when(this)},e}(),k=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(e.length<2)throw new Error("pass at least two injectors");this.injectors=e}return e.prototype.get=function(t,r){for(var n=0;n<this.injectors.length;n++){var o=this.injectors[n].get(t,e.NOT_FOUND);if(o!==e.NOT_FOUND)return o}if(arguments.length>=2)return r;this.injectors[0].get(t)},e.NOT_FOUND={},e}(),B=0,H=function(e){return e.inputs.map(function(e){return{prop:e.propName,token:e.templateName}})},J=function(){function e(e,t,r){this.router=e,this.viewContainerRef=r,this._uiViewData={},this._parent=t}return Object.defineProperty(e.prototype,"_name",{set:function(e){this.name=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return n.parse("_uiViewData.config.viewDecl.$context.self")(this)},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var e=this,t=this.router,r=this._parent.fqn,n=this.name||"$default";this._uiViewData={$type:"ng2",id:B++,name:n,fqn:r?r+"."+n:n,creationContext:this._parent.context,configUpdated:this._viewConfigUpdated.bind(this),config:void 0},this._deregisterHook=t.transitionService.onBefore({},function(t){return e._applyUiCanExitHook(t)}),this._deregisterUIView=t.viewService.registerUIView(this._uiViewData)},e.prototype._applyUiCanExitHook=function(e){var t=this._componentRef&&this._componentRef.instance,r=t&&t.uiCanExit;if(n.isFunction(r)){var o=this.state;-1!==e.exiting().indexOf(o)&&e.onStart({},function(){return r.call(t,e)})}},e.prototype._disposeLast=function(){this._componentRef&&this._componentRef.destroy(),this._componentRef=null},e.prototype.ngOnDestroy=function(){this._deregisterUIView&&this._deregisterUIView(),this._deregisterHook&&this._deregisterHook(),this._disposeLast()},e.prototype._viewConfigUpdated=function(e){if(!e)return this._disposeLast();e instanceof L&&this._uiViewData.config!==e&&(this._disposeLast(),n.trace.traceUIViewConfigUpdated(this._uiViewData,e&&e.viewDecl.$context),this._applyUpdatedConfig(e),this._componentRef.changeDetectorRef.markForCheck())},e.prototype._applyUpdatedConfig=function(e){this._uiViewData.config=e;var r=new n.ResolveContext(e.path),o=this._getComponentInjector(r),i=e.viewDecl.component,a=o.get(t.ComponentFactoryResolver),s=a.resolveComponentFactory(i);this._componentRef=this._componentTarget.createComponent(s,void 0,o),this._applyInputBindings(s,this._componentRef.instance,r,i)},e.prototype._getComponentInjector=function(r){var o=r.getTokens().map(function(e){return r.getResolvable(e)}).filter(function(e){return e.resolved}),i=o.map(function(e){return{provide:e.token,useValue:e.data}}),a={context:this._uiViewData.config.viewDecl.$context,fqn:this._uiViewData.fqn};i.push({provide:e.PARENT_INJECT,useValue:a});var s=this.viewContainerRef.injector,u=r.getResolvable(n.NATIVE_INJECTOR_TOKEN).data,c=new k(u,s);return t.ReflectiveInjector.resolveAndCreate(i,c)},e.prototype._applyInputBindings=function(e,t,r,o){var i=this._uiViewData.config.viewDecl.bindings||{},a=Object.keys(i),s=function(t){var r=e.inputs.find(function(e){return e.templateName===t});return r&&r.propName||t},u=a.reduce(function(e,t){return e.concat([{prop:s(t),token:i[t]}])},[]),c=H(e).filter(function(e){return!n.inArray(a,e.prop)}),p=function(e){return{prop:e.prop,resolvable:r.getResolvable(e.token)}};u.concat(c).map(p).filter(function(e){return e.resolvable&&e.resolvable.resolved}).forEach(function(e){t[e.prop]=e.resolvable.data})},e.PARENT_INJECT="UIView.PARENT_INJECT",e.decorators=[{type:t.Component,args:[{selector:"ui-view, [ui-view]",exportAs:"uiView",template:'\n    <ng-template #componentTarget></ng-template>\n    <ng-content *ngIf="!_componentRef"></ng-content>\n  '}]}],e.ctorParameters=function(){return[{type:n.UIRouter},{type:void 0,decorators:[{type:t.Inject,args:[e.PARENT_INJECT]}]},{type:t.ViewContainerRef}]},e.propDecorators={_componentTarget:[{type:t.ViewChild,args:["componentTarget",{read:t.ViewContainerRef}]}],name:[{type:t.Input,args:["name"]}],_name:[{type:t.Input,args:["ui-view"]}]},e}(),z=function(){function e(e,t){this._el=e,this._renderer=t}return e.prototype.openInNewTab=function(){return"_blank"===this._el.nativeElement.target},e.prototype.update=function(e){e&&""!==e?this._renderer.setProperty(this._el.nativeElement,"href",e):this._renderer.removeAttribute(this._el.nativeElement,"href")},e.decorators=[{type:t.Directive,args:[{selector:"a[uiSref]"}]}],e.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2}]},e}(),K=function(){function e(e,t,r){var n=this;this.targetState$=new o.ReplaySubject(1),this._emit=!1,this._router=e,this._anchorUISref=t,this._parent=r,this._statesSub=e.globals.states$.subscribe(function(){return n.update()})}return Object.defineProperty(e.prototype,"uiSref",{set:function(e){this.state=e,this.update()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"uiParams",{set:function(e){this.params=e,this.update()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"uiOptions",{set:function(e){this.options=e,this.update()},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this._emit=!0,this.update()},e.prototype.ngOnChanges=function(e){this.update()},e.prototype.ngOnDestroy=function(){this._emit=!1,this._statesSub.unsubscribe(),this.targetState$.unsubscribe()},e.prototype.update=function(){var e=this._router.stateService;if(this._emit){var t=e.target(this.state,this.params,this.getOptions());this.targetState$.next(t)}if(this._anchorUISref){var r=e.href(this.state,this.params,this.getOptions());this._anchorUISref.update(r)}},e.prototype.getOptions=function(){var e={relative:this._parent&&this._parent.context&&this._parent.context.name,inherit:!0,source:"sref"};return n.extend(e,this.options||{})},e.prototype.go=function(){if(!this._anchorUISref||!this._anchorUISref.openInNewTab())return this._router.stateService.go(this.state,this.params,this.getOptions()),!1},e.decorators=[{type:t.Directive,args:[{selector:"[uiSref]",exportAs:"uiSref",host:{"(click)":"go()"}}]}],e.ctorParameters=function(){return[{type:n.UIRouter},{type:z,decorators:[{type:t.Optional}]},{type:void 0,decorators:[{type:t.Inject,args:[J.PARENT_INJECT]}]}]},e.propDecorators={state:[{type:t.Input,args:["uiSref"]}],params:[{type:t.Input,args:["uiParams"]}],options:[{type:t.Input,args:["uiOptions"]}]},e}(),Y={active:!1,exact:!1,entering:!1,exiting:!1,targetStates:[]},G=function(e){if(!e.exists())return function(){return!1};var t=e.$state(),r=e.params(),o=n.PathUtils.buildPath(e),i=o.map(function(e){return e.paramSchema}).reduce(n.unnestR,[]).filter(function(e){return r.hasOwnProperty(e.id)});return function(e){var o=n.tail(e);if(!o||o.state!==t)return!1;var a=n.PathUtils.paramValues(e);return n.Param.equals(i,a,r)}},Z=function(){function e(e){this.uiSrefStatus=new t.EventEmitter(!1),this._globals=e,this.status=Object.assign({},Y)}return e.prototype.ngAfterContentInit=function(){var e=this,t=c.switchMap.call(this._globals.start$,function(e){var t=function(t){return{evt:t,trans:e}},r=a.of(t("start")),n=e.promise.then(function(){return t("success")},function(){return t("error")}),o=s.fromPromise(n);return f.concat.call(r,o)});this._srefs$=new i.BehaviorSubject(this._srefs.toArray()),this._srefChangesSub=this._srefs.changes.subscribe(function(t){return e._srefs$.next(t)});var r=c.switchMap.call(this._srefs$,function(e){return u.combineLatest(e.map(function(e){return e.targetState$}))});this._subscription=c.switchMap.call(t,function(e){return p.map.call(r,function(t){return t.map(function(t){return y(e,t)}).reduce(m)})}).subscribe(this._setStatus.bind(this))},e.prototype.ngOnDestroy=function(){this._subscription&&this._subscription.unsubscribe(),this._srefChangesSub&&this._srefChangesSub.unsubscribe(),this._srefs$&&this._srefs$.unsubscribe(),this._subscription=this._srefChangesSub=this._srefs$=void 0},e.prototype._setStatus=function(e){this.status=e,this.uiSrefStatus.emit(e)},e.decorators=[{type:t.Directive,args:[{selector:"[uiSrefStatus],[uiSrefActive],[uiSrefActiveEq]",exportAs:"uiSrefStatus"}]}],e.ctorParameters=function(){return[{type:n.UIRouterGlobals}]},e.propDecorators={uiSrefStatus:[{type:t.Output,args:["uiSrefStatus"]}],_srefs:[{type:t.ContentChildren,args:[K,{descendants:!0}]}]},e}(),Q=function(){function e(e,t,r){var n=this;this._classes=[],this._classesEq=[],this._subscription=e.uiSrefStatus.subscribe(function(e){n._classes.forEach(function(n){return t.setElementClass(r.nativeElement,n,e.active)}),n._classesEq.forEach(function(n){return t.setElementClass(r.nativeElement,n,e.exact)})})}return Object.defineProperty(e.prototype,"active",{set:function(e){this._classes=e.split("s+")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activeEq",{set:function(e){this._classesEq=e.split("s+")},enumerable:!0,configurable:!0}),e.prototype.ngOnDestroy=function(){this._subscription.unsubscribe()},e.decorators=[{type:t.Directive,args:[{selector:"[uiSrefActive],[uiSrefActiveEq]"}]}],e.ctorParameters=function(){return[{type:Z},{type:t.Renderer},{type:t.ElementRef,decorators:[{type:t.Host}]}]},e.propDecorators={active:[{type:t.Input,args:["uiSrefActive"]}],activeEq:[{type:t.Input,args:["uiSrefActiveEq"]}]},e}(),W=[K,z,J,Q,Z],X=W,ee=new t.InjectionToken("UIRouter Root Module"),te=new t.InjectionToken("UIRouter Module"),re=new t.InjectionToken("UIRouter States"),ne=function(){function e(){}return e.forRoot=function(t){return void 0===t&&(t={}),{ngModule:e,providers:[se,ue,I(t.useHash)].concat(S(t))}},e.forChild=function(t){return void 0===t&&(t={}),{ngModule:e,providers:b(t)}},e.decorators=[{type:t.NgModule,args:[{imports:[r.CommonModule],declarations:[W],exports:[W],entryComponents:[J]}]}],e.ctorParameters=function(){return[]},e}(),oe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},ie=function(e){function t(t,r,n){var o=e.call(this,t,n)||this;return o._locationStrategy=r,o._locationStrategy.onPopState(function(e){"hashchange"!==e.type&&o._listener(e)}),o}return T(t,e),t.prototype._get=function(){return this._locationStrategy.path(!0).replace(this._locationStrategy.getBaseHref().replace(/\/$/,""),"")},t.prototype._set=function(e,t,r,o){var i=n.parseUrl(r),a=i.path,s=i.search,u=i.hash,c=a+(u?"#"+u:"");o?this._locationStrategy.replaceState(e,t,c,s):this._locationStrategy.pushState(e,t,c,s)},t.prototype.dispose=function(t){e.prototype.dispose.call(this,t)},t}(n.BaseLocationServices),ae=function(e){function t(t,o){var i=e.call(this,t,n.is(r.PathLocationStrategy)(o))||this;return i._locationStrategy=o,i}return T(t,e),t.prototype.baseHref=function(e){return this._locationStrategy.getBaseHref()},t}(n.BrowserLocationConfig),se=[{provide:n.UIRouter,useFactory:C,deps:[r.LocationStrategy,ee,te,t.Injector]},{provide:J.PARENT_INJECT,useFactory:j,deps:[n.StateRegistry]}],ue=[{provide:n.StateService,useFactory:N,deps:[n.UIRouter]},{provide:n.TransitionService,useFactory:P,deps:[n.UIRouter]},{provide:n.UrlMatcherFactory,useFactory:V,deps:[n.UIRouter]},{provide:n.UrlRouter,useFactory:D,deps:[n.UIRouter]},{provide:n.UrlService,useFactory:A,deps:[n.UIRouter]},{provide:n.ViewService,useFactory:M,deps:[n.UIRouter]},{provide:n.StateRegistry,useFactory:F,deps:[n.UIRouter]},{provide:n.UIRouterGlobals,useFactory:$,deps:[n.UIRouter]}],ce=se.concat(ue);e.uiRouterFactory=C,e.parentUIViewInjectFactory=j,e._UIROUTER_INSTANCE_PROVIDERS=se,e.fnStateService=N,e.fnTransitionService=P,e.fnUrlMatcherFactory=V,e.fnUrlRouter=D,e.fnUrlService=A,e.fnViewService=M,e.fnStateRegistry=F,e.fnGlobals=$,e._UIROUTER_SERVICE_PROVIDERS=ue,e.UIROUTER_PROVIDERS=ce,e.UIROUTER_ROOT_MODULE=ee,e.UIROUTER_MODULE_TOKEN=te,e.UIROUTER_STATES=re,e.onTransitionReady=R,e.makeRootProviders=S,e.makeChildProviders=b,e.locationStrategy=I,e.UIRouterModule=ne,e.applyModuleConfig=g,e.applyRootModuleConfig=v,e._UIROUTER_DIRECTIVES=W,e.UIROUTER_DIRECTIVES=X,e.UIView=J,e.AnchorUISref=z,e.UISref=K,e.UISrefStatus=Z,e.UISrefActive=Q,e.ng2ViewsBuilder=d,e.Ng2ViewConfig=L,e.ng2LazyLoadBuilder=x,e.loadNgModule=w,e.loadModuleFactory=E,e.applyNgModule=U,e.multiProviderParentChildDelta=O,Object.keys(n).forEach(function(t){e[t]=n[t]}),Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ui-router-ng2.min.js.map
